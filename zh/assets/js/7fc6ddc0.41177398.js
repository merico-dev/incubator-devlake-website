"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[27445],{72601:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=t(87462),l=(t(67294),t(3905));t(61839);const r={},i="DevLake Release Guide",o={unversionedId:"DeveloperManuals/Release-SOP",id:"DeveloperManuals/Release-SOP",title:"DevLake Release Guide",description:"Please make sure your public key was included in the https://downloads.apache.org/incubator/devlake/KEYS , if not, please update this file first.",source:"@site/docs/DeveloperManuals/Release-SOP.md",sourceDirName:"DeveloperManuals",slug:"/DeveloperManuals/Release-SOP",permalink:"/zh/docs/DeveloperManuals/Release-SOP",draft:!1,editUrl:"https://github.com/apache/incubator-devlake-website/edit/main/docs/DeveloperManuals/Release-SOP.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"E2E Test Guide",permalink:"/zh/docs/DeveloperManuals/E2E-Test-Guide"},next:{title:"UnitTest Test Guide",permalink:"/zh/docs/DeveloperManuals/UnitTest"}},s={},p=[{value:"How to update KEYS",id:"how-to-update-keys",level:2},{value:"ASF Release Policy",id:"asf-release-policy",level:2},{value:"Tools:",id:"tools",level:2},{value:"Prepare",id:"prepare",level:2},{value:"Pack",id:"pack",level:2},{value:"Upload",id:"upload",level:2},{value:"Vote",id:"vote",level:2},{value:"Release",id:"release",level:2},{value:"Apache",id:"apache",level:3},{value:"GitHub",id:"github",level:3}],c={toc:p};function d(e){let{components:a,...t}=e;return(0,l.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"devlake-release-guide"},"DevLake Release Guide"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Please make sure your public key was included in the ",(0,l.kt)("a",{parentName:"strong",href:"https://downloads.apache.org/incubator/devlake/KEYS"},"https://downloads.apache.org/incubator/devlake/KEYS")," , if not, please update this file first.")),(0,l.kt)("h2",{id:"how-to-update-keys"},"How to update KEYS"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Clone the svn repository"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"svn co https://dist.apache.org/repos/dist/dev/incubator/devlake\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Append your public key to the KEYS file\ncd devlake"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Check if your public key is in the KEYS file"),(0,l.kt)("li",{parentName:"ul"},"If it does not, create a new ",(0,l.kt)("a",{parentName:"li",href:"https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key"},"GPG key"),", and then run the following command to see if it was successful.")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"gpg --list-sigs <your name>\n")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Append your publick key")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"    gpg --armor --export <your name> >> KEYS\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Upload"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'svn add KEYS\nsvn commit -m "update KEYS"\nsvn cp https://dist.apache.org/repos/dist/dev/incubator/devlake/KEYS https://dist.apache.org/repos/dist/release/incubator/devlake/ -m "update KEYS"\n')),(0,l.kt)("p",{parentName:"li"},"We will use ",(0,l.kt)("inlineCode",{parentName:"p"},"v0.16.0")," as an example to demonstrate the release process."))),(0,l.kt)("h2",{id:"asf-release-policy"},"ASF Release Policy"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.apache.org/legal/release-policy.html"},"https://www.apache.org/legal/release-policy.html")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://incubator.apache.org/guides/releasemanagement.html"},"https://incubator.apache.org/guides/releasemanagement.html"))),(0,l.kt)("h2",{id:"tools"},"Tools:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"gpg")," creating and verifying the signature"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"shasum")," creating and verifying the checksum"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"git")," checkout and pack the codebase"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"svn")," uploading the code to the Apache code hosting server")),(0,l.kt)("h2",{id:"prepare"},"Prepare"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Check against the Incubator Release Checklist"),(0,l.kt)("li",{parentName:"ul"},"Create folder ",(0,l.kt)("inlineCode",{parentName:"li"},"releases/lake-v0.16.0")," and put the two files ",(0,l.kt)("inlineCode",{parentName:"li"},"docker-compose.yml")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"env.example")," in there."),(0,l.kt)("li",{parentName:"ul"},"Update the file ",(0,l.kt)("inlineCode",{parentName:"li"},".github/ISSUE_TEMPLATE/bug-report.yml")," to include the version ",(0,l.kt)("inlineCode",{parentName:"li"},"v0.16.0"))),(0,l.kt)("h2",{id:"pack"},"Pack"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Checkout to the branch/commit")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/apache/incubator-devlake.git\ncd incubator-devlake\ngit checkout b268d53a48edb26d3c9b73b782798703f068f655\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Tag the commit and push to origin"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"git tag v0.16.0-rc2\ngit push origin v0.16.0-rc2\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Pack the code"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'git archive --format=tar.gz --output="<the-output-dir>/apache-devlake-0.16.0-incubating-src.tar.gz" --prefix="apache-devlake-0.16.0-incubating-src/" v0.16.0-rc2\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Before proceeding to the next step, please make sure your public key was included in the ",(0,l.kt)("a",{parentName:"p",href:"https://downloads.apache.org/incubator/devlake/KEYS"},"https://downloads.apache.org/incubator/devlake/KEYS"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Create signature and checksum"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cd <the-output-dir>\ngpg -s --armor --output apache-devlake-0.16.0-incubating-src.tar.gz.asc --detach-sig apache-devlake-0.16.0-incubating-src.tar.gz\nshasum -a 512  apache-devlake-0.16.0-incubating-src.tar.gz > apache-devlake-0.16.0-incubating-src.tar.gz.sha512\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Verify signature and checksum"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"gpg --verify apache-devlake-0.16.0-incubating-src.tar.gz.asc apache-devlake-0.16.0-incubating-src.tar.gz\nshasum -a 512 --check apache-devlake-0.16.0-incubating-src.tar.gz.sha512\n")))),(0,l.kt)("h2",{id:"upload"},"Upload"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Clone the svn repository",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"svn co https://dist.apache.org/repos/dist/dev/incubator/devlake\n"))),(0,l.kt)("li",{parentName:"ul"},"Copy the files into the svn local directory",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cd devlake\nmkdir -p 0.16.0-incubating-rc2\ncp <the-output-dir>/apache-devlake-0.16.0-incubating-src.tar.gz* 0.16.0-incubating-rc2/\n"))),(0,l.kt)("li",{parentName:"ul"},"Upload local files",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'svn add 0.16.0-incubating-rc2\nsvn commit -m "add 0.16.0-incubating-rc2"\n')))),(0,l.kt)("h2",{id:"vote"},"Vote"),(0,l.kt)("p",null,"You can check ",(0,l.kt)("a",{parentName:"p",href:"https://cwiki.apache.org/confluence/display/INCUBATOR/Incubator+Release+Checklist"},"Incubator Release Checklist")," before voting."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Devlake community vote:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Start the ",(0,l.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/2v2so22fj9mg5h7jck1opsqhjyc86k06"},"vote")," by sending an email to ",(0,l.kt)("a",{parentName:"p",href:"mailto:dev@devlake.apache.org"},"dev@devlake.apache.org")),(0,l.kt)("p",{parentName:"li"},"Title: ","[VOTE]"," Release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}"),(0,l.kt)("p",{parentName:"li"},"Content:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"}," Hello everyone,\n\n This is a call for vote to release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}\n\n The release candidates:\n https://dist.apache.org/repos/dist/dev/incubator/devlake/{{.Version}}-incubating-rc{{.RC}}/\n\n Git tag for the release:\n https://github.com/apache/incubator-devlake/releases/tag/v{{.Version}}-rc{{.RC}}\n\n Keys to verify the Release Candidate:\n https://downloads.apache.org/incubator/devlake/KEYS\n\n How to build:\n https://devlake.apache.org/docs/DeveloperManuals/DeveloperSetup\n\n The vote will be open for at least 72 hours or until the necessary number of votes are reached.\n If approved we will seek final release approval from the IPMC.\n\n Please vote accordingly:\n\n [ ] +1 approve\n [ ] +0 no opinion\n [ ] -1 disapprove with the reason\n\n Thanks\n {{.YourName}}\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Announce the ",(0,l.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/wfzzjv53vfxml54098o6dt4913j47d4j"},"vote")," result:\nTitle: ","[RESULT][VOTE]"," Release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}"),(0,l.kt)("p",{parentName:"li"},"Content:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"Hello everyone,\n\nThe vote closes now with the following results:\n\n{{.TotalVotes}} (+1 binding) votes\n{{range .Votes}}- {{.Name}}{{end}}\n\nI will bring the vote results to general@incubator.apache.org\n\nThanks\n{{.YourName}}\n\n"))))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Apache incubator community vote:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Start the ",(0,l.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/5dbqc3t2bq7kfqccobrh7j9vqopj030k"},"vote")," by sending an email to ",(0,l.kt)("a",{parentName:"p",href:"mailto:general@incubator.apache.org"},"general@incubator.apache.org"),"\nTitle: ","[VOTE]"," Release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}"),(0,l.kt)("p",{parentName:"li"},"Content:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"Hello everyone,\n\nThis is a call for vote to release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}.\nThe Apache DevLake community has voted on and approved a proposal to release Apache DevLake (Incubating) version v{{.Version}}-rc{{.RC}}.\n\nCommunity vote thread:\n[Community Vote Thread]({{.VoteThreadURL}})\n\nCommunity vote result thread:\n[Community Vote Result Thread]({{.VoteResultThreadURL}})\n\nThe release candidates:\n[Release Candidates]({{.RCURL}})\n\nGit tag for the release:\n[Git Tag]({{.GitTagURL}})\n\nKeys to verify the Release Candidate:\nhttps://downloads.apache.org/incubator/devlake/KEYS\n\nHow to build:\nhttps://devlake.apache.org/docs/DeveloperManuals/DeveloperSetup/\n\nThe vote will be open for at least 72 hours or until the necessary number of votes are reached.\n\nPlease vote accordingly:\n[ ] +1 approve\n[ ] +0 no opinion\n[ ] -1 disapprove with the reason\n\nThanks\n\n{{.YourName}}\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Announce the ",(0,l.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/40ktrw42c7hpok7vj33ql6wgdq2mpg92"},"vote")," result:\nTitle:\n","[RESULT][VOTE]"," Release Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}}"),(0,l.kt)("p",{parentName:"li"},"Content:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"Hello everyone,\n\nI am pleased to announce that the vote for Apache DevLake (Incubating) v{{.Version}}-rc{{.RC}} has now concluded. Thank you all for your review and participation in the voting process.\n\nThe release voting has passed with {{bindingVotes}} binding votes, {{nonBindingVotes}} non-binding vote and no +0 or -1 votes.\n\nThe individuals who provided binding votes are:\n{{bindingVotesList}}\n\nThe non-binding vote{{pluralNonBindingVotes}} is from:\n{{nonBindingVotesList}}\n\nYou can find the voting thread at the following link: [Voting Thread](https://lists.apache.org/thread/{{votingThreadURL}})\n\nIn closing, I want to express my gratitude to everyone who has offered us help, advice, and guidance throughout this process. We will proceed with completing the remaining tasks.\n\nThank you all once again!\n\nBest Regards,\n{{.YourName}}\n")))))),(0,l.kt)("h2",{id:"release"},"Release"),(0,l.kt)("h3",{id:"apache"},"Apache"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Move the release to the ASF content distribution system"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'svn mv https://dist.apache.org/repos/dist/dev/incubator/devlake/0.16.0-incubating-rc2 https://dist.apache.org/repos/dist/release/incubator/devlake/0.16.0-incubating -m "transfer packages for 0.16.0-incubating-rc2"\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Wait until the directory ",(0,l.kt)("inlineCode",{parentName:"p"},"https://downloads.apache.org/incubator/devlake/0.16.0-incubating/")," was created")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Remove the last release from ",(0,l.kt)("inlineCode",{parentName:"p"},"https://downloads.apache.org/")," (according the Apache release policy, this link should be pointing to the current release)"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'svn rm https://dist.apache.org/repos/dist/release/incubator/devlake/0.15.0-incubating -m "remove 0.15.0-incubating"\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Announce ",(0,l.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/czf6p3xtlkq6t8g4q35blkbf2xclsl3p"},"release")," by sending an email to ",(0,l.kt)("a",{parentName:"p",href:"mailto:general@incubator.apache.org"},"general@incubator.apache.org"),"\nTitle:\n[","[ANNOUNCE]"," Release Apache Devlake(incubating) {{.Version}}-incubating"),(0,l.kt)("p",{parentName:"li"},"Content:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"Hello everyone,\n\nThe Apache DevLake (Incubating) {{.Version}}-incubating has been released!\n\n**Apache DevLake** is an open-source dev data platform that ingests, analyzes, and visualizes the fragmented data from DevOps tools to distill insights for engineering productivity.\n\nDownload Links: https://downloads.apache.org/incubator/devlake/\n\nChangelogs:\n- xxx.\n- xxx.\n- xxx.\n\nWebsite: https://devlake.apache.org/\n\nResources:\n- Issue:https://github.com/apache/incubator-devlake/issues\n- Mailing list: dev@devlake.apache.org\n\nBest Regards,\n{{.YourName}}\n\n----\nDisclaimer: Apache DevLake(incubating) is an effort undergoing incubation at the Apache\nSoftware Foundation (ASF), sponsored by the Apache Incubator PMC.\n\nIncubation is required of all newly accepted projects until a further review\nindicates that the infrastructure, communications, and decision making process\nhave stabilized in a manner consistent with other successful ASF projects.\n\nWhile incubation status is not necessarily a reflection of the completeness\nor stability of the code, it does indicate that the project has yet to be\nfully endorsed by the ASF.\n\n")))),(0,l.kt)("h3",{id:"github"},"GitHub"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Create tag v0.16.0 and push",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"git checkout v0.16.0-rc2\ngit tag v0.16.0\ngit push origin v0.16.0\n"))),(0,l.kt)("li",{parentName:"ul"},"Open the URL ",(0,l.kt)("inlineCode",{parentName:"li"},"https://github.com/apache/incubator-devlake/releases/"),", draft a new release, fill in the form and upload two files ",(0,l.kt)("inlineCode",{parentName:"li"},"docker-compose.yml")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"env.example"))))}d.isMDXComponent=!0}}]);