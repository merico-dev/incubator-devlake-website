"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[53920],{250:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=i(87462),a=(i(67294),i(3905));i(61839);const o={title:"Notifications",description:"Notifications\n",sidebar_position:4},r=void 0,s={unversionedId:"DeveloperManuals/Notifications",id:"DeveloperManuals/Notifications",title:"Notifications",description:"Notifications\n",source:"@site/docs/DeveloperManuals/Notifications.md",sourceDirName:"DeveloperManuals",slug:"/DeveloperManuals/Notifications",permalink:"/zh/docs/DeveloperManuals/Notifications",draft:!1,editUrl:"https://github.com/apache/incubator-devlake-website/edit/main/docs/DeveloperManuals/Notifications.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Notifications",description:"Notifications\n",sidebar_position:4},sidebar:"docsSidebar",previous:{title:"DB Migration",permalink:"/zh/docs/DeveloperManuals/DBMigration"},next:{title:"Dal",permalink:"/zh/docs/DeveloperManuals/Dal"}},l={},u=[{value:"Configuration",id:"configuration",level:2},{value:"Notification Request",id:"notification-request",level:2},{value:"Signature",id:"signature",level:2}],c={toc:u};function d(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"If you want to receive a notification on pipeline finished, you need to add the following two keys to the Environment Variables (i.e. the ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," file)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# .env\n# notification request url, e.g.: \nNOTIFICATION_ENDPOINT=\n# secret is used to calculate signature\nNOTIFICATION_SECRET=\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NOTIFICATION_ENDPOINT")," The fully qualified URL of your notification receiver."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NOTIFICATION_SECRET")," Used to sign the request data, allowing you to verify whether the request is sent by a legitimate sender. You can leave this empty if verification is not needed. See ",(0,a.kt)("a",{parentName:"li",href:"#signature"},"Signature")," for the algorithm detail.")),(0,a.kt)("h2",{id:"notification-request"},"Notification Request"),(0,a.kt)("p",null,"Example of request you would receive"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'POST http://example.com/lake/notify?nouce=3-FDXxIootApWxEVtz&sign=424c2f6159bd9e9828924a53f9911059433dc14328a031e91f9802f062b495d5\n\n{\n  "ProjectName": "projectName",\n  "PipelineID": 39,\n  "BeganAt": "2024-09-05T15:08:00.389+08:00",\n  "FinishedAT": "2024-09-05T15:28:00.389+08:00",\n  "Status":"TASK_COMPLETED",\n  "CreatedAt":"2024-09-05T15:08:00.389+08:00",\n  "UpdatedAt":"2024-09-05T15:28:00.785+08:00"\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"nonce"),": A unique value to prevent replay attacks."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"sign"),": A signature for verifying the request's authenticity.")),(0,a.kt)("h2",{id:"signature"},"Signature"),(0,a.kt)("p",null,"The signature ensures that the request is sent by an authorized sender and has not been tampered with. You should verify the signature before processing the notification. The signature is calculated using the sha256 algorithm."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"// calculate checksum\nsum := sha256.Sum256([]byte(requestBody + NOTIFICATION_SECRET + nouce))\nreturn hex.EncodeToString(sum[:])\n")))}d.isMDXComponent=!0}}]);